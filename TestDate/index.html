<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<title>PHP Test</title>
		<script src="date_utils.js" type="text/javascript"> </script>
		<script type="text/javascript">
			
			//http://www.w3schools.com/js/js_date_methods.asp
			//http://www.w3schools.com/js/tryit.asp?filename=tryjs_date_new_numbers
			function onPageLoaded()
			{
				var now 		    = new Date();
				var currentYear     = now.getFullYear();
				var currentMonth    = now.getMonth();
				var currentDay      = now.getDate();

				var initialDay = new Date(currentYear, 7, 16);
				var lastDay    = new Date(initialDay.getFullYear(), initialDay.getMonth(), initialDay.getDate() + 48);
				var days 	   = DateUtils.getInstance().getDays(initialDay, lastDay);

				//var days = DateUtils.getInstance().getDaysOfMonth(currentYear, 2);
				
				updateCalendarDiv(days);
			}

			function updateCalendarDiv(days)
			{
				var daysByDayOfWeek = DateUtils.getInstance().arrangeDaysByDayOfWeek(days);
				var calendar 		= document.getElementById("calendar");
				var html     		= ""; 
				var currentX 		= 0;
				var currentY 		= 0;
				var daysOfWeek 		= ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

				for(var x = 0; x < daysOfWeek.length; x++)
				{
					var currentDay = daysOfWeek[x];
					html 		  += getDayOfWeekDivHTML(currentDay, currentX, currentDay); 
					currentX 	  += 100;
				}

				currentX = 0;
				currentY = 50;

				for(var dayOfWeek = 0; dayOfWeek < 7; dayOfWeek++)
				{
					var currentDays = daysByDayOfWeek[dayOfWeek];

					for(var x = 0; x < currentDays.length; x++)
					{
						var currentDay = currentDays[x];
						html 		  += getDayDivHTML(currentDay, currentX, currentY);
						currentY 	  += 50;
					}

					currentX += 100;
					currentY  = 50;
				}

				calendar.innerHTML = html;
			}

			function getDayOfWeekDivHTML(dayOfWeek, x, y)
			{
				return "<div id='" + dayOfWeek + " 'style='position:absolute; left:" + x + "px; top:" + y + "px; width:100; height:50;'> " + dayOfWeek + " </div>";
			}

			function getDayDivHTML(day, x, y)
			{
				var dateString = day == null ? "" : day.toDateString();
				var dayText    = day == null ? "" : dateString.substring(4, dateString.length - 4);

				return "<div id='" + dateString + "' style='position:absolute; left:" + x + "px; top:" + y + "px; width:100; height:50; border-style:groove;'> " + dayText + " </div>";
			}

		</script>
	</head>
	<body onload="onPageLoaded();">
		<div id="calendar">
	</body>
</html>